metadata:
  sample_table: genomes.csv
  subsample_table: assets.csv

  output_dir: $GENOMES
  pipeline_interfaces: refgenie_piface.yaml

constant_attributes:
  protocol: "refgenie"
  destdir: "LOCALDIR"
  local_fa: "LOCAL_FA"

derived_attributes: ['destdir', 'local_fa', ]

data_sources:
  LOCALDIR: "/project/shefflab/www/refgenie_raw/"
  LOCAL_FA: "{destdir}/{genome}.fa.gz"
  SRCFILE_FA: "{fasta}"
  LOCAL_GENCODE_GTF: "{destdir}/{genome}_gencode.gtf.gz"
  LOCAL_ENSEMBL_GTF: "{destdir}/{genome}_ensembl.gtf.gz"
  LOCAL_ENSEMBL_RB: "{destdir}/{genome}_ensembl_rb.gff.gz"
  LOCAL_DBNSFP: "{destdir}/{genome}_dbNSFP.zip"
  LOCAL_DBSNP_VCF: "{destdir}/{genome}_dbSNP.gz"
  LOCAL_DBSNP_TBI: "{destdir}/{genome}_dbSNP.gz.tbi"
  LOCAL_REFGENE: "{destdir}/{genome}_refGene.txt.gz"
  SRCFILE_GENCODE_GTF: "{gencode_gtf}"
  SRCFILE_ENSEMBL_GTF: "{ensembl_gtf}"
  SRCFILE_DBNSFP: "{dbnsfp}"
  SRCFILE_DBSNP_VCF: "{dbsnp_vcf}"
  SRCFILE_DBSNP_TBI: "{dbsnp_tbi}"
  SRCFILE_REFGENE: "{refgene}"
  SRCFILE_ENSEMBL_RB: "{ensembl_rb}"

subprojects:
  derive_sample_name:
    constant_attributes:
      sample_name: "genome_asset"
      protocol: "refgenie"
    derived_attributes: [sample_name]
    data_sources:
      genome_asset: "{genome}_{asset}"

  getfasta:
    metadata:
      pipeline_interfaces: wget_piface.yaml
      subsample_table: null
    constant_attributes:
      destdir: "LOCALDIR"
      destfile: "LOCAL_FA"
      src: "SRCFILE_FA"
    derived_attributes: ["src", "destdir", "destfile"]
